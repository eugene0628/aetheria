@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

:root {
    --bg-color: #0f0f12;
    --ui-bg: rgba(20, 20, 25, 0.95);
    --ui-border: #555;
    --text-color: #dcdde1;
    --accent: #00d2d3;
    --hp-color: #ff6b6b;
    --stamina-color: #feca57;
    --qi-color: #a29bfe;
    --rare-color: #54a0ff;
    --gold: #e1b12c;
    --danger: #ff4757;
}

body {
    margin: 0;
    overflow: hidden;
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: 'Press Start 2P', monospace;
    user-select: none;
}

canvas { image-rendering: pixelated; }

#ui-layer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; padding: 15px; box-sizing: border-box;
    display: flex; flex-direction: column; justify-content: space-between;
}

/* Top Section */
#top-bar { display: flex; justify-content: space-between; align-items: flex-start; }
#vitals-panel { 
    pointer-events: auto; background: rgba(0,0,0,0.6); 
    padding: 15px; border-radius: 4px; border: 1px solid #333; 
    backdrop-filter: blur(2px);
}

.stat-bar-container { width: 220px; margin-bottom: 8px; position: relative; }
.bar-label { font-size: 10px; margin-bottom: 4px; display: flex; justify-content: space-between; text-shadow: 1px 1px 0 #000; }
.bar-track { height: 10px; background: #111; width: 100%; border: 1px solid #333; position: relative; overflow: hidden; }
.bar-fill { height: 100%; width: 100%; transition: width 0.2s cubic-bezier(0.4, 0, 0.2, 1); }

.hp .bar-fill { background: linear-gradient(90deg, #c0392b, var(--hp-color)); box-shadow: 0 0 10px var(--hp-color); }
.stamina .bar-fill { background: linear-gradient(90deg, #f39c12, var(--stamina-color)); }
.qi .bar-fill { background: linear-gradient(90deg, #8e44ad, var(--qi-color)); box-shadow: 0 0 10px var(--qi-color); }
.hunger .bar-fill { background: #d35400; }

/* Spirit Sense (Minimap) */
#minimap-container {
    width: 150px; height: 150px;
    border: 2px solid var(--ui-border);
    background: rgba(0, 0, 0, 0.8);
    border-radius: 50%;
    overflow: hidden;
    position: relative;
    margin-bottom: 10px;
}
#minimap-canvas { width: 100%; height: 100%; }

/* Realm Info */
#right-panel { display: flex; flex-direction: column; align-items: flex-end; pointer-events: auto; }
#info-panel { text-align: right; text-shadow: 2px 2px 0 #000; margin-top: 10px; }
#clock-display { font-size: 14px; color: var(--gold); margin-bottom: 8px; }
#realm-display { font-size: 12px; color: var(--qi-color); margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 5px;}
.controls-hint { font-size: 8px; color: #888; line-height: 1.6; background: rgba(0,0,0,0.4); padding: 5px; border-radius: 4px; }

/* Stats Overlay */
#stats-overlay {
    position: absolute; left: 20px; top: 250px;
    font-size: 10px; color: #aaa;
    background: rgba(0,0,0,0.6); padding: 15px; border: 1px solid #333;
    border-radius: 4px; width: 180px;
}
.stat-line { margin-bottom: 8px; display: flex; justify-content: space-between; }
.stat-hl { color: #fff; font-weight: bold; }
.gear-section { margin-top: 15px; border-top: 1px solid #444; padding-top: 10px; }
.gear-slot { margin-bottom: 5px; font-size: 9px; color: var(--gold); }

/* Bottom HUD */
#bottom-hud { display: flex; justify-content: space-between; align-items: flex-end; width: 100%; }

/* Skill Bar */
#skill-bar { display: flex; gap: 15px; pointer-events: auto; margin-bottom: 10px; }
.skill-slot {
    width: 50px; height: 50px; background: #222; border: 2px solid #555;
    position: relative; display: flex; justify-content: center; align-items: center;
    font-size: 8px; color: #777; transition: all 0.1s;
    box-shadow: 0 4px 0 #111; border-radius: 4px;
}
.skill-slot.unlocked { border-color: var(--accent); color: #fff; cursor: pointer; }
.skill-slot.unlocked:active { transform: translateY(2px); box-shadow: 0 2px 0 #111; }
.skill-slot.cooldown { border-color: var(--danger); filter: grayscale(1); cursor: not-allowed; }
.skill-slot.cooldown::after {
    content: ''; position: absolute; bottom:0; left:0; width: 100%; 
    height: var(--cd-pct); background: rgba(255, 0, 0, 0.4);
    transition: height 0.1s linear;
}
.key-hint { 
    position: absolute; top: -10px; left: -10px; 
    background: #fff; color: #000; width: 16px; height: 16px;
    display: flex; justify-content: center; align-items: center;
    font-size: 10px; font-weight: bold; border-radius: 2px;
}

/* Log */
#log-panel {
    width: 400px; height: 160px; overflow: hidden;
    display: flex; flex-direction: column-reverse;
    text-shadow: 1px 1px 0 #000; pointer-events: none;
    font-size: 10px; mask-image: linear-gradient(to top, black 80%, transparent 100%);
}
.log-entry { margin-bottom: 6px; opacity: 0.8; }
.log-entry.new { opacity: 1; animation: slideIn 0.2s ease-out; }
.log-entry.gain { color: #2ecc71; }
.log-entry.warn { color: var(--danger); }
.log-entry.rare { color: var(--rare-color); }
.log-entry.info { color: var(--gold); }
@keyframes slideIn { from { transform: translateX(-10px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

/* Inventory */
#inventory-modal {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 650px; height: 500px; background: #1a1a1d; border: 2px solid var(--ui-border);
    display: none; padding: 25px; pointer-events: auto; z-index: 20;
    box-shadow: 0 0 50px rgba(0,0,0,0.9); border-radius: 8px;
}
.modal-header { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 15px; margin-bottom: 15px; }
.inv-layout { display: flex; gap: 20px; height: 380px; }
#inv-grid { 
    display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(4, 1fr); 
    gap: 12px; flex: 2; align-content: start;
}
.inv-slot {
    background: #111; border: 1px solid #333; position: relative; height: 60px;
    cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: border-color 0.2s;
}
.inv-slot:hover { border-color: var(--accent); background: #1e1e1e; }
.inv-count { position: absolute; bottom: 3px; right: 4px; font-size: 10px; color: #fff; background: rgba(0,0,0,0.5); padding: 1px 3px; border-radius: 2px;}

/* Crafting List */
#crafting-panel { flex: 1; border-left: 1px solid #444; padding-left: 15px; overflow-y: auto; }
.craft-btn {
    background: #252525; color: #ccc; border: 1px solid #444; padding: 12px;
    font-family: inherit; font-size: 9px; cursor: pointer; text-align: left;
    transition: 0.2s; margin-bottom: 8px; width: 100%; display: flex; justify-content: space-between; align-items: center;
}
.craft-btn:hover { background: #333; color: #fff; border-color: var(--accent); }
.craft-btn span:last-child { color: #888; font-size: 8px; }

/* Tooltip */
#tooltip {
    position: absolute; display: none; background: rgba(10, 10, 15, 0.95);
    border: 1px solid var(--accent); padding: 10px; z-index: 100;
    pointer-events: none; width: 200px;
}
.tt-title { color: var(--accent); font-size: 12px; margin-bottom: 5px; font-weight: bold; }
.tt-type { color: #888; font-size: 8px; margin-bottom: 8px; font-style: italic; }
.tt-desc { color: #ddd; font-size: 9px; line-height: 1.4; }

/* Modal */
#modal {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    background: #1a1a1d; border: 4px double var(--accent); padding: 40px;
    width: 500px; display: none; text-align: center; z-index: 100;
    box-shadow: 0 0 100px rgba(0,0,0,1);
}
button.action-btn {
    background: var(--accent); border: none; padding: 15px 40px;
    font-family: inherit; font-size: 14px; cursor: pointer; color: #000; font-weight: bold;
    margin-top: 25px; box-shadow: 0 4px 0 #00a8a9; transition: transform 0.1s;
}
button.action-btn:active { transform: translateY(4px); box-shadow: none; }

/* Floating Text Animation */
@keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-40px); } }
